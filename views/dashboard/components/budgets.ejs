<div class="bg-white shadow rounded-2xl p-6 hover:shadow-lg transition flex flex-col h-full">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold text-gray-800">Mes Budgets</h3>
    <span class="text-sm text-gray-500">Gestion mensuelle</span>
  </div>

  <!-- Create Budget Form -->
  <form id="budgetForm" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div>
      <label for="month" class="block text-sm font-medium text-gray-600">Mois</label>
      <input type="number" name="month" id="month" min="1" max="12" required
             class="mt-1 w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400 focus:outline-none">
    </div>
    <div>
      <label for="amount" class="block text-sm font-medium text-gray-600">Montant (MAD)</label>
      <input type="number" name="amount" id="amount" step="0.01" required
             class="mt-1 w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400 focus:outline-none">
    </div>
    <div>
      <label for="categoryId" class="block text-sm font-medium text-gray-600">Catégorie</label>
      <select id="categoryId" name="categoryId"
              class="mt-1 w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400 focus:outline-none">
        <% categories.forEach(cat => { %>
          <option value="<%= cat.id %>"><%= cat.name %></option>
        <% }) %>
      </select>
    </div>
    <div class="md:col-span-3 flex justify-end">
      <button type="submit"
              class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">
        + Ajouter Budget
      </button>
    </div>
  </form>

  <!-- List of Budgets -->
  <div class="flex-1 overflow-y-auto">
    <ul id="budgetList" class="space-y-3">
      <% if (budgets && budgets.length > 0) { %>
        <% budgets.forEach(budget => { %>
          <li class="p-4 border border-gray-200 rounded-lg flex justify-between items-center hover:bg-gray-50 transition">
            <div class="text-sm text-gray-700">
              <p><span class="font-semibold">Mois :</span> <%= budget.month %></p>
              <p><span class="font-semibold">Montant :</span> <%= budget.amount %> MAD</p>
              <p><span class="font-semibold">Catégorie :</span> <%= budget.Category ? budget.Category.name : "N/A" %></p>
            </div>
            <div class="flex gap-2">
              <button class="editBudget bg-blue-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-600 transition" data-id="<%= budget.id %>">Modifier</button>
              <button class="deleteBudget bg-red-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-600 transition" data-id="<%= budget.id %>">Supprimer</button>
            </div>
          </li>
        <% }) %>
      <% } else { %>
        <p class="text-gray-500 text-sm">Aucun budget trouvé.</p>
      <% } %>
    </ul>
  </div>
</div>
